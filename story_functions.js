done_talking=function(g){var h;var c=true;console.log("in convo_fin");for(h in g){console.log("testingtopics: "+h);if(f[h]!="x"){c=false}}console.log(c);return c};function convo_1(){back="washroom_informer_desc";if(!f.convo_1){d+="<li>{conversation item 1|convo_1}</li>"}if(!f.convo_2){d+="<li>{conversation item 2|convo_2}</li>"}if(!f.convo_3){d+="<li>{conversation item 3|convo_3}</li>"}}function interact(b){if(f.giver){root=0;b();use=0}}function exit_memory(){if(back!=0){if(f.end_memory){return"<p class='back exit_memory highlight_exit'>{&#10003;   Finish memory|start}</p>"}else{return"<p class='back exit_memory'>{Exit memory|start}</p>"}}else{return""}}function informer_interactions(){interact(function(){switch(f.giver){case"washroom_informer_pogs":d='You pass the bag beneath the stall door. It is quickly snatched away. You hear the Pogs clattering as she examines the bag. "Alright," she says. "This is {all we know...|all_we_know_informer}"';i.washroom_informer_pogs=0;f.washroom_informer_paid=1;back=0;break;case"sinatra":d='"All we have is that name. You can find him on your own."';i.sinatra=0;break;case"headmaster":d='"He was in a rage after the Teacher\'s lounge incident." ';break;case"kasparov":if(!f.washroom_informer_paid){d='"First the goods."'}else{d="You already have what you need to know. "}break;default:d="She isn't interested. "}})}function timer_init(c,e){console.log("timer initiatlized");if(!exist(f[c])||f[c]==0){f[c]=f.moves+e}}function timer_fin(b){if(f.moves>f[b]&&f[b]!="x"){f[b]="x";return true}else{return false}}function exist(b){if(typeof b!=="undefined"){return true}else{return false}}var test_array=[100,["tx 1",5000],200,["tx 2",5000]];function oneoff_link(g){link_parts=g.split("|");var e=link_parts[0];var h=link_parts[1];if(!exist(f[h])){f[h]=0}if(f[h]){return e}else{return'<a onClick="f.'+h+"=1; process('"+h+"'); return false;\">"+e+"</a>"}}function oneoff_text(c,e){if(!exist(f[c])){f[c]=0}if(f[c]){return""}else{f[c]=1;return e}}function sq(k,j,h){if(!exist(f[k])){f[k]="0"}console.log("f[flag_name]"+f[k]);if(exist(h)){f.reward=variable_ratio_2(f.reward,3,2)}console.log("f[flag_name]"+f[k]);var g=f[k];console.log("count"+g);if(exist(h)&&!reward){return j[0]}if(f[k]<j.length-1&&reward){f[k]++;console.log("incremented")}else{f[k]="x"}if(g=="x"){return j[j.length-1]}else{console.log("count"+g);return j[g]}}function v(p,n,q){var m;var o=n.slice(0);var r=o[0];o.shift();console.log("rewweafdsfd "+f[p]);if(f[p]==0||!exist(f[p])){f.reward=variable_ratio_2(f.reward,3,2);buffer="";for(var l=0;l<o.length;l++){buffer+="1"}f[p]=buffer;return r}if(f[p]!="x"&&f.reward<1){var s=[];s.flag_name=p;s.fin=q;m=randomizer(o,s);f.reward=variable_ratio_2(f.reward,3,2);console.log("reward activated")}else{m=r}return m}function variable_ratio_2(k,j,g){var h;if(parseInt(k)<=0){h=lnRandomScaled(j,g)}else{h=parseInt(k)-1}return h}function get_keys(h){var e=[];for(var g in h){e.push(g)}return e}function get_values(h){var e=[];for(var g in h){e.push(h[g])}return e}function randomizer(G,K){var D,u,J,z,B,C,w,L,A,I,E;J=[];if(!K){K=0}else{if(!K.fin){K.fin="reset"}}if(Array.isArray(G)){for(var F=0;F<G.length;F++){J[G[F]]=1}G=J}else{J=G}var z=[];var B=[];z=get_keys(J);B=get_values(J);if(K.flag_name){var H="";if(!x(""+f[K.flag_name],"1")){H="";for(var F=0;F<z.length;F++){H+="1"}f[K.flag_name]=H;console.log("rese4t 1s")}if(f[K.flag_name]==="0"){H="";for(var F=0;F<z.length;F++){H+="1"}f[K.flag_name]=H}else{var H=f[K.flag_name]+""}if(f[K.flag_name]!="1"&&x(""+f[K.flag_name],"1")==1){var y=f[K.flag_name].split("");E=y.indexOf("1");I=z[E]}else{only_unseen=get_only_unseen(J,H);D=get_keys(only_unseen);u=get_values(only_unseen);I=getRandomItem(D,u)}}else{I=getRandomItem(z,B)}E=z.indexOf(I);if(K.flag_name&&f[K.flag_name]!="1"){var y=f[K.flag_name].split("");y[E]="0";y=y.join("");f[K.flag_name]=y}if(K.flag_name!="0"&&parseInt(f[K.flag_name])==0&&K.fin=="stop"){f[K.flag_name]="x"}return I;function x(a,c){var b=a.split(c).length-1;return b}}function get_only_unseen(k,j){var m=get_keys(k).length;var l=jQuery.extend({},k);var n=get_keys(k);for(var o=0;o<m;o++){if(j.charAt(o)=="0"){delete l[n[o]]}}return l}var getRandomItem=function(l,m){var j=m.reduce(function(b,a,c,e){return b+a});var n=rand(0,j);var k=0;for(var o=0;o<l.length;o++){k+=m[o];k=+k.toFixed(2);if(n<=k){return l[o]}}};var rand=function(c,e){return Math.random()*(e-c)+c};